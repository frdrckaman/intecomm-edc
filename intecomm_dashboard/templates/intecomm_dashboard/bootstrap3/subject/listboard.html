{% extends edc_listboard_template %}
{% load edc_dashboard_extras %}

{% block listboard_panel %}

    <a id="patientlog_changelist"
        title="{% if perms.intecomm_prn.change_patientlog %}patient logs{% else %}check your permissions{% endif %}"
        class="btn btn-sm btn-default" role="button"
        {% if not perms.intecomm_prn.change_patientlog %}disabled{% endif %}
        href="{% if perms.intecomm_prn.change_patientlog %}{% url "intecomm_prn_admin:intecomm_prn_patientlog_changelist" %}{% endif %}">
            Patient Logs
    </a>
    <a id="patientgroup_changelist"
        title="{% if perms.intecomm_prn.change_patientlog %}patient groups{% else %}check your permissions{% endif %}"
        class="btn btn-sm btn-default" role="button"
        {% if not perms.intecomm_prn.change_patientgroup %}disabled{% endif %}
        href="{% if perms.intecomm_prn.add_patientgroup %}{% url "intecomm_prn_admin:intecomm_prn_patientgroup_changelist" %}{% endif %}">
            Patient Groups
    </a>

{% endblock %}

{% block listboard_table_header %}

    <!-- begin results header -->
    <th>#</th>
    <th></th>
    <th>Identifier</th>
    <th>Subject</th>
    <th>Age / Born</th>
    <th>Consented</th>
    <th>Modified</th>
    <!-- end results header -->

{% endblock listboard_table_header %}

{% block listboard_table_columns %}
    <td>{{ result.subject_identifier }}
    </td>
    <td>
       {% if result.gender == MALE %}
           <i class="fas fa-male fa-lg"></i>
       {% else %}
           <i class="fas fa-female fa-lg"></i>
       {% endif %}
       {% if perms.edc_registration.display_firstname %}{{ result.first_name }}{% else %}******{% endif %} {% if perms.edc_registration.display_lastname %}{{ result.initials }}{% else %}******{% endif %}
    </td>
    <td>{% age_in_years result.object.dob %}yrs {% if perms.edc_registration.display_dob %}{{ result.object.dob|date:"SHORT_DATE_FORMAT" }}{% else %}**/**/****{% endif %}</td>
    <td>{{ result.object.consent_datetime|date:"SHORT_DATE_FORMAT" }}</td>
    <td>{{ result.object.modified|date:"SHORT_DATETIME_FORMAT" }}</td>
{% endblock listboard_table_columns %}
